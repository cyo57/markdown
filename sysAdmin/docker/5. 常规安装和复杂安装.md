---
tags:
  - docker
---
> 服务安装总体流程
> 1. 搜索镜像
> 2. 拉取镜像
> 3. 查看镜像
> 4. 启动容器 (-p)
> 5. 停止容器
> 6. 移除容器

## 常规安装

### 安装 Tomcat

- 搜索 docker hub 镜像
- 拉取镜像
```bash
docker pull tomcat
docker images
```
- 创建容器实例
```bash
docker run -it -p 8080:8080 tomcat
# docker run -d -p 8080:8080 tomcat
Ctrl P Q
```
> -p : 指定端口映射 主机:容器
> -P : 随机端口映射 (主机端口随机分配)
> -it : 交互/终端
> -d : 后台

> [!tip]
> 新版 tomcat 首页路径发生了一些改变，无法直接访问


### 安装 MySQL

> [!important]
> 查看本机是否已启动MySQL导致端口占用
> `ps -ef | grep mysql`

```bash
docker run -d -p 3306:3306 \
-e MYSQL_ROOT_PASSWORD \
mysql:<version>
```
#### 实战问题

- 插入中文报错（乱码）
	docker 默认字符集编码未修正
	啊

- 容器数据卷（数据迁移）
	保证

#### 实战
- 创建容器和容器卷
```bash
docker run -d -p 3306:3306 --privileged=true \
-v /path/mysql/log:/var/log/mysql \
-v /path/mysql/data:/var/lib/mysql \
-v /path/mysql/conf:/var/mysql/conf.d \
-e MYSQL_ROOT_PASSWORD \
--name mysql \
mysql:<version>
```

- 中文乱码
/var/mysql/conf.d/my.cnf
```conf
[client]
default_character_set=utf8
[mysqld]
collation_server
```