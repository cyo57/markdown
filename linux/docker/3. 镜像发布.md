# Docker镜像发布

## 镜像

> 在 docker pull 的过程中，镜像会一层一层下载

### UnionFS 联合文件系统

> UnionFS 是一个文件系统，允许将多个文件系统叠加在一起，从而创建一个单一的、统一的文件系统视图。在 Docker 中，UnionFS 用于将容器的根文件系统与主机的根文件系统叠加在一起，从而创建一个统一的文件系统视图，供容器使用。
> 
> 镜像可以通过分层进行继承，基于基础镜像可以制作各种具体的镜像

### Docker 镜像加载原理

> 在 Docker 中，镜像由一层一层 UnionFS 文件系统构成
> 
> bootfs 主要包含 bootloader 和 kernel。bootloader 主要引导加载 kernel，Linux刚启动会加载 bootfs 文件系统，在 Docker 镜像最底层是引导文件系统 bootfs。
> 
> rootfs，在bootfs之上。包含 /dev, /proc,/ bin, /etc 等标准目录和文件，rootfs 就是各种不同的发行版

### 镜像和容器

#### 提交容器为新镜像

> 扩展现有镜像，并创建新的镜像。

```bash
docker commit -m "Describe Message" -a="Author" <CONTAINER_ID> <IAMGE_NAME>:[TAG]

[root@minecraft-server ~]# docker commit -m "Vim Ubuntu" -a="cyo57" 72613e8ac37a ubuntu-cyo57:1.0
sha256:aa461ced9fa1bc72254272b203bac189e315652a862778014ee9147c0d6b4493
[root@minecraft-server ~]# 
[root@minecraft-server ~]# docker images
REPOSITORY     TAG       IMAGE ID       CREATED         SIZE
ubuntu-cyo57   1.0       aa461ced9fa1   3 seconds ago   190MB
```


